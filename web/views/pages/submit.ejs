<%- include('../partials/header', { user }) %>

<div class="container mx-auto px-6 py-12">
  <div class="max-w-2xl mx-auto">
    <h1 class="text-4xl font-bold mb-8 gold-text">ðŸ“¤ Submit Clip</h1>
    
    <div class="card-dark rounded-xl p-8">
      <form id="submitForm" enctype="multipart/form-data">
        <div class="mb-6">
          <label class="block mb-2 font-semibold">Select Campaign</label>
          <select name="campaign_id" required class="w-full p-3 bg-gray-900 border border-gray-700 rounded-lg focus:border-[#E31E24] focus:outline-none">
            <option value="">Choose a campaign...</option>
            <% campaigns.forEach(campaign => { %>
              <option value="<%= campaign.id %>"><%= campaign.name %></option>
            <% }) %>
          </select>
        </div>

        <div class="mb-6">
          <label class="block mb-2 font-semibold">Video Link</label>
          <input type="url" name="video_link" required placeholder="https://..." class="w-full p-3 bg-gray-900 border border-gray-700 rounded-lg focus:border-[#E31E24] focus:outline-none">
          <p class="text-sm text-gray-500 mt-1">YouTube Shorts, TikTok, Instagram Reels, or Twitter/X</p>
        </div>

        <div class="mb-6">
          <label class="block mb-2 font-semibold">Analytics Proof (Required for Instagram and Twitter)</label>
          <input type="file" name="analytics" accept="image/*" class="w-full p-3 bg-gray-900 border border-gray-700 rounded-lg focus:border-[#E31E24] focus:outline-none">
        </div>

        <button type="submit" class="w-full py-3 gold-gradient text-black font-bold text-lg rounded-lg hover:opacity-90 transition">
          Submit Clip
        </button>
      </form>
    </div>
  </div>
</div>

<script>
document.getElementById('submitForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const formData = new FormData(e.target);
  
  const res = await fetch('/submissions/submit', {
    method: 'POST',
    body: formData
  });
  
  const data = await res.json();
  alert(data.message);
  if (data.success) {
    e.target.reset();
  }
});
</script>

<%- include('../partials/footer') %>
